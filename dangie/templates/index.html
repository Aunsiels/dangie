<html>
<head>
<title>Dangie Demo</title>
<meta charset=utf-8>
    <style>
        body {
            max-width: 40em;
            margin:auto;
            border: 2em solid #EEEEEE;
            padding: 1em;
        }
		.button {
		  border: none;
		  padding: 4px 8px;
		  cursor: pointer;
		  background: lightgray;
          font-size: 1em;
          margin: 0.5em;
         box-shadow: 2px 2px darkgray;
         border-radius: 1em;
		}
    </style>
</head>
<body id=main>
    <h1 style="text-align:center">Graphical Rewriting Demo</h1>
    <center>
        {% if svg is none %}
          <img id="planCanvas" src="{{ url_for('static', filename='empty.svg') }}" style="width:80%;">
        {% else %}
          <h2>Solution</h2>
          {{ svg|safe }}
        {% endif %}
    </center>

    <center>
        {% if svg_parse_tree is none %}
          <br>
        <h2>{{ message }}</h2>
        {% else %}
          <br>
          <h2>Grammar Parsing Tree</h2>
          {{ svg_parse_tree|safe }}
        {% endif %}
    </center>
    <br>

    <form action="" method="post" novalidate>
        {{ form.hidden_tag() }}
        <p>
            {{ form.functions.label }}<br>
            {{ form.functions(size=32) }}<br>
            {% for error in form.functions.errors %}
                <span style="color: red;">[{{ error }}]</span>
            {% endfor %}
        </p>
        <p>{{ form.search() }}</p>
    </form>
    <br>
    <p>Or load existing examples:</p>
    <ul>
        <li>For
            <a
                    href="{{ url_for('homepage.home', function_name='functions.txt') }}">birthday
                </a> (example from our paper)</li>
        <li>With a
            <a
                    href="{{ url_for('homepage.home', function_name='Box.txt') }}">star shape
            </a></li>
        <li>For
            <a
                    href="{{ url_for('homepage.home', function_name='Movies-functions.txt') }}">Movies
            </a></li>
        <li>For
            <a
                    href="{{ url_for('homepage.home', function_name='Music-functions.txt') }}">Music
            </a></li>
        <li>For
            <a
                    href="{{ url_for('homepage.home', function_name='Books-functions.txt') }}">Books
            </a></li>
    </ul>
    <br>
    <p>
       The function definitions follow the structure: <b>functionName:
    relation1, (*,) relation2, (*,), ..., relationk (,*) </b>.
   <br>
    The symbol <b>*</b> means that the second variable of the previous atom
    is existential.
    <br>
    A user must specify a query following the structure: <b>query:
        relation</b>.
    </p>


   <br><br>

    <p>
        This demo is based on our <a href="https://arxiv.org/abs/2003.07316">paper</a>:
    </p>
    <pre>
@InProceedings{10.1007/978-3-030-49461-2_26,
    author="Romero, Julien
    and Preda, Nicoleta
    and Amarilli, Antoine
    and Suchanek, Fabian",
    editor="Harth, Andreas
    and Kirrane, Sabrina
    and Ngonga Ngomo, Axel-Cyrille
    and Paulheim, Heiko
    and Rula, Anisa
    and Gentile, Anna Lisa
    and Haase, Peter
    and Cochez, Michael",
    title="Equivalent Rewritings on Path Views with Binding Patterns",
    booktitle="The Semantic Web",
    year="2020",
    publisher="Springer International Publishing",
    address="Cham",
    pages="446--462",
    isbn="978-3-030-49461-2"
    }
    </pre>
    <p>
        The code is available on Github: <a
            href="https://github.com/Aunsiels/dangie">https://github.com/Aunsiels/dangie</a><br>
        The code is based on <a
            href="https://github.com/Aunsiels/query_rewriting">https://github.com/Aunsiels/query_rewriting</a> and <a
            href="https://pyformlang.readthedocs.io/en/latest/">Pyformlang</a>.
    </p>

    <br>

</body>
</html>
