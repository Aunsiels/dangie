<html>
<head>
<title>Dangie Demo</title>
<meta charset=utf-8>
    <style>
        body {
            max-width: 40em;
            margin:auto;
            border: 2em solid #EEEEEE;
            padding: 1em;
        }
		.button {
		  border: none;
		  padding: 4px 8px;
		  cursor: pointer;
		  background: lightgray;
          font-size: 1em;
          margin: 0.5em;
         box-shadow: 2px 2px darkgray;
         border-radius: 1em;
		}
    </style>
</head>
<body id=main>
    <h1 style="text-align:center">Graphical Rewriting Demo</h1>
    <center>
        {% if svg is none %}
          <img id="planCanvas" src="{{ url_for('static', filename='empty.svg') }}" style="width:80%;">
        {% else %}
          <h2>Solution</h2>
          {{ svg|safe }}
        {% endif %}
    </center>

    <center>
        {% if svg_parse_tree is none %}
          <br>
        <h2>{{ message }}</h2>
        {% else %}
          <br>
          <h2>Grammar Parsing Tree</h2>
          {{ svg_parse_tree|safe }}
        {% endif %}
    </center>
    <br>

    <form action="" method="post" novalidate>
        {{ form.hidden_tag() }}
        <p>
            {{ form.functions.label }}<br>
            {{ form.functions(size=32) }}<br>
            {% for error in form.functions.errors %}
                <span style="color: red;">[{{ error }}]</span>
            {% endfor %}
        </p>
        <p>{{ form.search() }}</p>
    </form>
    <br>
    <p>Or load existing examples:</p>
    <ul>
        <li>For
            <a
                    href="{{ url_for('homepage.home', function_name='functions.txt') }}">birthday
                </a> (example from our paper)</li>
        <li>With a
            <a
                    href="{{ url_for('homepage.home', function_name='Box.txt') }}">star shape
            </a></li>
        <li>For
            <a
                    href="{{ url_for('homepage.home', function_name='Movies-functions.txt') }}">Movies
            </a></li>
        <li>For
            <a
                    href="{{ url_for('homepage.home', function_name='Music-functions.txt') }}">Music
            </a></li>
        <li>For
            <a
                    href="{{ url_for('homepage.home', function_name='Books-functions.txt') }}">Books
            </a></li>
    </ul>
    <br>
    <p>
       The function definitions follow the structure: <b>functionName:
    relation1, (*,) relation2, (*,), ..., relationk (,*) </b>.
   <br>
    The symbol <b>*</b> means that the second variable of the previous atom
    is existential.
    <br>
    A user must specify a query following the structure: <b>query:
        relation</b>.
    </p>


   <br><br>

    <p>
        This demo is based on our <a href="https://arxiv.org/abs/2003.07316">paper</a>:
        <br><br>
        @InProceedings{10.1007/978-3-030-49461-2_26,<br>
            author="Romero, Julien<br>
            and Preda, Nicoleta<br>
            and Amarilli, Antoine<br>
            and Suchanek, Fabian",<br>
            editor="Harth, Andreas<br>
            and Kirrane, Sabrina<br>
            and Ngonga Ngomo, Axel-Cyrille<br>
            and Paulheim, Heiko<br>
            and Rula, Anisa<br>
            and Gentile, Anna Lisa<br>
            and Haase, Peter<br>
            and Cochez, Michael",<br>
            title="Equivalent Rewritings on Path Views with Binding Patterns",<br>
            booktitle="The Semantic Web",<br>
            year="2020",<br>
            publisher="Springer International Publishing",<br>
            address="Cham",<br>
            pages="446--462",<br>
            abstract="A view with a binding pattern is a parameterized query on a database. Such views are used, e.g., to model Web services. To answer a query on such views, the views have to be orchestrated together in execution plans. We show how queries can be rewritten into equivalent execution plans, which are guaranteed to deliver the same results as the query on all databases. We provide a correct and complete algorithm to find these plans for path views and atomic queries. Finally, we show that our method can be used to answer queries on real-world Web services.",<br>
            isbn="978-3-030-49461-2"<br>
            }<br>

        <br><br>
        The code is available on Github: <a
            href="https://github.com/Aunsiels/dangie">https://github.com/Aunsiels/dangie</a><br>
        The code is based on <a
            href="https://github.com/Aunsiels/query_rewriting">https
        ://github.com/Aunsiels/query_rewriting</a> and <a
            href="https://pyformlang.readthedocs.io/en/latest/">Pyformlang</a>.
    </p>

    <br>

</body>
</html>
